{"version":3,"sources":["../node_modules/mime-types/index.js","../node_modules/mime-types/node_modules/mime-db/index.js","../node_modules/path-browserify/index.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/v4.js","../node_modules/react-firebase-hooks/database/dist/index.esm.js"],"names":["db","require","extname","EXTRACT_TYPE_REGEXP","TEXT_TYPE_REGEXP","charset","type","match","exec","mime","toLowerCase","test","exports","charsets","lookup","contentType","str","indexOf","extension","exts","extensions","length","Object","create","path","substr","types","preference","undefined","keys","forEach","i","from","source","to","populateMaps","module","normalizeArray","parts","allowAboveRoot","up","last","splice","unshift","filter","xs","f","res","push","resolve","resolvedPath","resolvedAbsolute","arguments","process","cwd","TypeError","charAt","split","p","join","normalize","isAbsolute","trailingSlash","paths","Array","prototype","slice","call","index","relative","trim","arr","start","end","fromParts","toParts","Math","min","samePartsLength","outputParts","concat","sep","delimiter","dirname","code","charCodeAt","hasRoot","matchedSlash","basename","ext","startDot","startPart","preDotState","len","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","validate","uuid","REGEX","byteToHex","toString","stringify","offset","v4","options","buf","rnds","random","__assign","assign","t","s","n","hasOwnProperty","apply","this","snapshotToData","snapshot","keyField","refField","transform","exists","_a","_b","val","isArray","isObject","key","ref","defaultState","defaultValue","loading","value","useLoadingValue","getDefaultValue","useReducer","state","action","error","dispatch","reset","setError","setValue","useMemo","isEqual","v1","v2","bothNull","equal","useIsEqualRef","onChange","useRef","useEffect","current","useComparatorRef","useObjectVal","query","on","off","resArray","useObject"],"mappings":"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","file":"static/js/4.daa863f1.chunk.js","sourcesContent":["/*!\n * mime-types\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar db = require('mime-db')\nvar extname = require('path').extname\n\n/**\n * Module variables.\n * @private\n */\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/\nvar TEXT_TYPE_REGEXP = /^text\\//i\n\n/**\n * Module exports.\n * @public\n */\n\nexports.charset = charset\nexports.charsets = { lookup: charset }\nexports.contentType = contentType\nexports.extension = extension\nexports.extensions = Object.create(null)\nexports.lookup = lookup\nexports.types = Object.create(null)\n\n// Populate the extensions/types maps\npopulateMaps(exports.extensions, exports.types)\n\n/**\n * Get the default charset for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction charset (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n  var mime = match && db[match[1].toLowerCase()]\n\n  if (mime && mime.charset) {\n    return mime.charset\n  }\n\n  // default text/* to utf-8\n  if (match && TEXT_TYPE_REGEXP.test(match[1])) {\n    return 'UTF-8'\n  }\n\n  return false\n}\n\n/**\n * Create a full Content-Type header given a MIME type or extension.\n *\n * @param {string} str\n * @return {boolean|string}\n */\n\nfunction contentType (str) {\n  // TODO: should this even be in this module?\n  if (!str || typeof str !== 'string') {\n    return false\n  }\n\n  var mime = str.indexOf('/') === -1\n    ? exports.lookup(str)\n    : str\n\n  if (!mime) {\n    return false\n  }\n\n  // TODO: use content-type or other module\n  if (mime.indexOf('charset') === -1) {\n    var charset = exports.charset(mime)\n    if (charset) mime += '; charset=' + charset.toLowerCase()\n  }\n\n  return mime\n}\n\n/**\n * Get the default extension for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction extension (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n\n  // get extensions\n  var exts = match && exports.extensions[match[1].toLowerCase()]\n\n  if (!exts || !exts.length) {\n    return false\n  }\n\n  return exts[0]\n}\n\n/**\n * Lookup the MIME type for a file path/extension.\n *\n * @param {string} path\n * @return {boolean|string}\n */\n\nfunction lookup (path) {\n  if (!path || typeof path !== 'string') {\n    return false\n  }\n\n  // get the extension (\"ext\" or \".ext\" or full path)\n  var extension = extname('x.' + path)\n    .toLowerCase()\n    .substr(1)\n\n  if (!extension) {\n    return false\n  }\n\n  return exports.types[extension] || false\n}\n\n/**\n * Populate the extensions and types maps.\n * @private\n */\n\nfunction populateMaps (extensions, types) {\n  // source preference (least -> most)\n  var preference = ['nginx', 'apache', undefined, 'iana']\n\n  Object.keys(db).forEach(function forEachMimeType (type) {\n    var mime = db[type]\n    var exts = mime.extensions\n\n    if (!exts || !exts.length) {\n      return\n    }\n\n    // mime -> extensions\n    extensions[type] = exts\n\n    // extension -> mime\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i]\n\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source)\n        var to = preference.indexOf(mime.source)\n\n        if (types[extension] !== 'application/octet-stream' &&\n          (from > to || (from === to && types[extension].substr(0, 12) === 'application/'))) {\n          // skip the remapping\n          continue\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type\n    }\n  })\n}\n","/*!\n * mime-db\n * Copyright(c) 2014 Jonathan Ong\n * MIT Licensed\n */\n\n/**\n * Module exports.\n */\n\nmodule.exports = require('./db.json')\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import { useReducer, useMemo, useEffect, useRef } from 'react';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar isObject = function (val) {\r\n    return val != null && typeof val === 'object' && Array.isArray(val) === false;\r\n};\r\nvar snapshotToData = function (snapshot, keyField, refField, transform) {\r\n    if (!snapshot.exists) {\r\n        return undefined;\r\n    }\r\n    var val = snapshot.val();\r\n    if (isObject(val)) {\r\n        return __assign({}, (transform ? transform(val) : val), (keyField ? (_a = {}, _a[keyField] = snapshot.key, _a) : null), (refField ? (_b = {}, _b[refField] = snapshot.ref, _b) : null));\r\n    }\r\n    return transform ? transform(val) : val;\r\n    var _a, _b;\r\n};\n\nvar initialState = {\r\n    loading: true,\r\n    value: {\r\n        keys: [],\r\n        values: [],\r\n    },\r\n};\r\nvar listReducer = function (state, action) {\r\n    switch (action.type) {\r\n        case 'add':\r\n            if (!action.snapshot) {\r\n                return state;\r\n            }\r\n            return __assign({}, state, { error: undefined, value: addChild(state.value, action.snapshot, action.previousKey) });\r\n        case 'change':\r\n            if (!action.snapshot) {\r\n                return state;\r\n            }\r\n            return __assign({}, state, { error: undefined, value: changeChild(state.value, action.snapshot) });\r\n        case 'error':\r\n            return __assign({}, state, { error: action.error, loading: false, value: {\r\n                    keys: undefined,\r\n                    values: undefined,\r\n                } });\r\n        case 'move':\r\n            if (!action.snapshot) {\r\n                return state;\r\n            }\r\n            return __assign({}, state, { error: undefined, value: moveChild(state.value, action.snapshot, action.previousKey) });\r\n        case 'remove':\r\n            if (!action.snapshot) {\r\n                return state;\r\n            }\r\n            return __assign({}, state, { error: undefined, value: removeChild(state.value, action.snapshot) });\r\n        case 'reset':\r\n            return initialState;\r\n        case 'value':\r\n            return __assign({}, state, { error: undefined, loading: false, value: setValue(action.snapshots) });\r\n        case 'empty':\r\n            return __assign({}, state, { loading: false, value: {\r\n                    keys: undefined,\r\n                    values: undefined,\r\n                } });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\nvar setValue = function (snapshots) {\r\n    if (!snapshots) {\r\n        return {\r\n            keys: [],\r\n            values: [],\r\n        };\r\n    }\r\n    var keys = [];\r\n    var values = [];\r\n    snapshots.forEach(function (snapshot) {\r\n        if (!snapshot.key) {\r\n            return;\r\n        }\r\n        keys.push(snapshot.key);\r\n        values.push(snapshot);\r\n    });\r\n    return {\r\n        keys: keys,\r\n        values: values,\r\n    };\r\n};\r\nvar addChild = function (currentState, snapshot, previousKey) {\r\n    if (!snapshot.key) {\r\n        return currentState;\r\n    }\r\n    var keys = currentState.keys, values = currentState.values;\r\n    if (!previousKey) {\r\n        // The child has been added to the start of the list\r\n        return {\r\n            keys: keys ? [snapshot.key].concat(keys) : [snapshot.key],\r\n            values: values ? [snapshot].concat(values) : [snapshot],\r\n        };\r\n    }\r\n    // Establish the index for the previous child in the list\r\n    var index = keys ? keys.indexOf(previousKey) : 0;\r\n    // Insert the item after the previous child\r\n    return {\r\n        keys: keys\r\n            ? keys.slice(0, index + 1).concat([snapshot.key], keys.slice(index + 1)) : [snapshot.key],\r\n        values: values\r\n            ? values.slice(0, index + 1).concat([snapshot], values.slice(index + 1)) : [snapshot],\r\n    };\r\n};\r\nvar changeChild = function (currentState, snapshot) {\r\n    if (!snapshot.key) {\r\n        return currentState;\r\n    }\r\n    var keys = currentState.keys, values = currentState.values;\r\n    var index = keys ? keys.indexOf(snapshot.key) : 0;\r\n    return __assign({}, currentState, { values: values\r\n            ? values.slice(0, index).concat([snapshot], values.slice(index + 1)) : [snapshot] });\r\n};\r\nvar removeChild = function (currentState, snapshot) {\r\n    if (!snapshot.key) {\r\n        return currentState;\r\n    }\r\n    var keys = currentState.keys, values = currentState.values;\r\n    var index = keys ? keys.indexOf(snapshot.key) : 0;\r\n    return {\r\n        keys: keys ? keys.slice(0, index).concat(keys.slice(index + 1)) : [],\r\n        values: values\r\n            ? values.slice(0, index).concat(values.slice(index + 1)) : [],\r\n    };\r\n};\r\nvar moveChild = function (currentState, snapshot, previousKey) {\r\n    // Remove the child from it's previous location\r\n    var tempValue = removeChild(currentState, snapshot);\r\n    // Add the child into it's new location\r\n    return addChild(tempValue, snapshot, previousKey);\r\n};\r\nvar useListReducer = (function () { return useReducer(listReducer, initialState); });\n\nvar defaultState = function (defaultValue) {\r\n    return {\r\n        loading: defaultValue === undefined || defaultValue === null,\r\n        value: defaultValue,\r\n    };\r\n};\r\nvar reducer = function () { return function (state, action) {\r\n    switch (action.type) {\r\n        case 'error':\r\n            return __assign({}, state, { error: action.error, loading: false, value: undefined });\r\n        case 'reset':\r\n            return defaultState(action.defaultValue);\r\n        case 'value':\r\n            return __assign({}, state, { error: undefined, loading: false, value: action.value });\r\n        default:\r\n            return state;\r\n    }\r\n}; };\r\nvar useLoadingValue = (function (getDefaultValue) {\r\n    var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\r\n    var _a = useReducer(reducer(), defaultState(defaultValue)), state = _a[0], dispatch = _a[1];\r\n    var reset = function () {\r\n        var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\r\n        dispatch({ type: 'reset', defaultValue: defaultValue });\r\n    };\r\n    var setError = function (error) {\r\n        dispatch({ type: 'error', error: error });\r\n    };\r\n    var setValue = function (value) {\r\n        dispatch({ type: 'value', value: value });\r\n    };\r\n    return useMemo(function () { return ({\r\n        error: state.error,\r\n        loading: state.loading,\r\n        reset: reset,\r\n        setError: setError,\r\n        setValue: setValue,\r\n        value: state.value,\r\n    }); }, [state.error, state.loading, reset, setError, setValue, state.value]);\r\n});\n\nvar useComparatorRef = function (value, isEqual, onChange) {\r\n    var ref = useRef(value);\r\n    useEffect(function () {\r\n        if (!isEqual(value, ref.current)) {\r\n            ref.current = value;\r\n            if (onChange) {\r\n                onChange();\r\n            }\r\n        }\r\n    });\r\n    return ref;\r\n};\r\nvar isEqual = function (v1, v2) {\r\n    var bothNull = !v1 && !v2;\r\n    var equal = !!v1 && !!v2 && v1.isEqual(v2);\r\n    return bothNull || equal;\r\n};\r\nvar useIsEqualRef = function (value, onChange) {\r\n    return useComparatorRef(value, isEqual, onChange);\r\n};\n\nvar useList = function (query) {\r\n    var _a = useListReducer(), state = _a[0], dispatch = _a[1];\r\n    var queryRef = useIsEqualRef(query, function () { return dispatch({ type: 'reset' }); });\r\n    var ref = queryRef.current;\r\n    useEffect(function () {\r\n        if (!ref) {\r\n            dispatch({ type: 'empty' });\r\n            return;\r\n        }\r\n        var onChildAdded = function (snapshot, previousKey) {\r\n            dispatch({ type: 'add', previousKey: previousKey, snapshot: snapshot });\r\n        };\r\n        var onChildChanged = function (snapshot) {\r\n            dispatch({ type: 'change', snapshot: snapshot });\r\n        };\r\n        var onChildMoved = function (snapshot, previousKey) {\r\n            dispatch({ type: 'move', previousKey: previousKey, snapshot: snapshot });\r\n        };\r\n        var onChildRemoved = function (snapshot) {\r\n            dispatch({ type: 'remove', snapshot: snapshot });\r\n        };\r\n        var onError = function (error) {\r\n            dispatch({ type: 'error', error: error });\r\n        };\r\n        var onValue = function (snapshots) {\r\n            dispatch({ type: 'value', snapshots: snapshots });\r\n        };\r\n        var childAddedHandler;\r\n        var onInitialLoad = function (snapshot) {\r\n            var snapshotVal = snapshot.val();\r\n            var childrenToProcess = snapshotVal\r\n                ? Object.keys(snapshot.val()).length\r\n                : 0;\r\n            // If the list is empty then initialise the hook and use the default `onChildAdded` behaviour\r\n            if (childrenToProcess === 0) {\r\n                childAddedHandler = ref.on('child_added', onChildAdded, onError);\r\n                onValue([]);\r\n            }\r\n            else {\r\n                // Otherwise, we load the first batch of children all to reduce re-renders\r\n                var children_1 = [];\r\n                var onChildAddedWithoutInitialLoad = function (addedChild, previousKey) {\r\n                    if (childrenToProcess > 0) {\r\n                        childrenToProcess--;\r\n                        children_1.push(addedChild);\r\n                        if (childrenToProcess === 0) {\r\n                            onValue(children_1);\r\n                        }\r\n                        return;\r\n                    }\r\n                    onChildAdded(snapshot, previousKey);\r\n                };\r\n                childAddedHandler = ref.on('child_added', onChildAddedWithoutInitialLoad, onError);\r\n            }\r\n        };\r\n        ref.once('value', onInitialLoad, onError);\r\n        var childChangedHandler = ref.on('child_changed', onChildChanged, onError);\r\n        var childMovedHandler = ref.on('child_moved', onChildMoved, onError);\r\n        var childRemovedHandler = ref.on('child_removed', onChildRemoved, onError);\r\n        return function () {\r\n            ref.off('child_added', childAddedHandler);\r\n            ref.off('child_changed', childChangedHandler);\r\n            ref.off('child_moved', childMovedHandler);\r\n            ref.off('child_removed', childRemovedHandler);\r\n        };\r\n    }, [dispatch, ref]);\r\n    var resArray = [state.value.values, state.loading, state.error];\r\n    return useMemo(function () { return resArray; }, resArray);\r\n};\r\nvar useListKeys = function (query) {\r\n    var _a = useList(query), snapshots = _a[0], loading = _a[1], error = _a[2];\r\n    var values = useMemo(function () {\r\n        return snapshots\r\n            ? snapshots.map(function (snapshot) { return snapshot.key; })\r\n            : undefined;\r\n    }, [snapshots]);\r\n    var resArray = [values, loading, error];\r\n    return useMemo(function () { return resArray; }, resArray);\r\n};\r\nvar useListVals = function (query, options) {\r\n    var keyField = options ? options.keyField : undefined;\r\n    var refField = options ? options.refField : undefined;\r\n    var transform = options ? options.transform : undefined;\r\n    var _a = useList(query), snapshots = _a[0], loading = _a[1], error = _a[2];\r\n    var values = useMemo(function () {\r\n        return (snapshots\r\n            ? snapshots.map(function (snapshot) {\r\n                return snapshotToData(snapshot, keyField, refField, transform);\r\n            })\r\n            : undefined);\r\n    }, [snapshots, keyField, refField, transform]);\r\n    var resArray = [\r\n        values,\r\n        loading,\r\n        error,\r\n    ];\r\n    return useMemo(function () { return resArray; }, resArray);\r\n};\n\nvar useObject = function (query) {\r\n    var _a = useLoadingValue(), error = _a.error, loading = _a.loading, reset = _a.reset, setError = _a.setError, setValue = _a.setValue, value = _a.value;\r\n    var ref = useIsEqualRef(query, reset);\r\n    useEffect(function () {\r\n        var query = ref.current;\r\n        if (!query) {\r\n            setValue(undefined);\r\n            return;\r\n        }\r\n        query.on('value', setValue, setError);\r\n        return function () {\r\n            query.off('value', setValue);\r\n        };\r\n    }, [ref.current]);\r\n    var resArray = [value, loading, error];\r\n    return useMemo(function () { return resArray; }, resArray);\r\n};\r\nvar useObjectVal = function (query, options) {\r\n    var keyField = options ? options.keyField : undefined;\r\n    var refField = options ? options.refField : undefined;\r\n    var transform = options ? options.transform : undefined;\r\n    var _a = useObject(query), snapshot = _a[0], loading = _a[1], error = _a[2];\r\n    var value = useMemo(function () {\r\n        return (snapshot\r\n            ? snapshotToData(snapshot, keyField, refField, transform)\r\n            : undefined);\r\n    }, [snapshot, keyField, refField, transform]);\r\n    var resArray = [\r\n        value,\r\n        loading,\r\n        error,\r\n    ];\r\n    return useMemo(function () { return resArray; }, resArray);\r\n};\n\nexport { useList, useListKeys, useListVals, useObject, useObjectVal };\n"],"sourceRoot":""}